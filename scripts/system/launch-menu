#!/usr/bin/env bash

# LAUNCH MENU
# Main menu launcher that calls specific menu functions
# Usage: launch-menu <menu_name>

# Path to theme file
THEME="$HOME/.config/rofi/screenrecord.rasi"

show_menu() {
    local prompt="$1"
    local options="$2"
    
    echo -e "$options" | rofi -dmenu \
        -p "$prompt" \
        -theme "$THEME"
}

show_screenrecord_menu() {
    case $(show_menu "Screenrecord" "ðŸ”Š With desktop audio\nðŸŽ¤ With microphone audio\nðŸ“¹ With webcam") in
        *desktop*) 
            notify-send "Starting recording" "Desktop audio only"
            omarchy-cmd-screenrecord --with-desktop-audio
            ;;
        *microphone*) 
            notify-send "Starting recording" "Desktop + microphone audio"
             omarchy-cmd-screenrecord --with-desktop-audio --with-microphone-audio
            ;;
        *webcam*) 
            notify-send "Starting recording" "Desktop + microphone + webcam"
            omarchy-cmd-screenrecord --with-desktop-audio --with-microphone-audio --with-webcam
            ;;
        *) 
            exit 0
            ;;
    esac
}

case "${1,,}" in
    screenrecord)
        show_screenrecord_menu
        ;;
    *)
        echo "Usage: launch-menu <menu_name>"
        echo ""
        echo "Available menus:"
        echo "  screenrecord - Screen recording options"
        echo ""
        exit 1
        ;;
esac
